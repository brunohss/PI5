<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrintSense - Monitor Ambiental 3D</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ–¨ï¸ PrintSense</h1>
            <p>Monitor Ambiental Inteligente para ImpressÃ£o 3D</p>
        </header>

        <!-- Seletor de Material -->
        <div class="material-selector">
            <label for="materialSelect">
                <strong>Material Ativo:</strong>
            </label>
            <select id="materialSelect" onchange="changeMaterial()">
                <option value="PLA">PLA (PadrÃ£o)</option>
                <option value="PETG">PETG</option>
                <option value="ABS">ABS</option>
                <option value="RESINA">Resina</option>
            </select>
        </div>

        <!-- Card de Status Geral -->
        <div class="status-card" id="statusCard">
            <h2 id="statusTitle">ğŸ”„ Carregando dados...</h2>
            <p id="statusDetails" class="status-description">Aguarde enquanto coletamos informaÃ§Ãµes dos sensores</p>
        </div>

        <!-- Grid de Sensores -->
        <div class="sensors-grid">
            <!-- Temperatura -->
            <div class="sensor-card" id="tempCard">
                <div class="sensor-header">
                    <div class="sensor-icon">ğŸŒ¡ï¸</div>
                    <h3>Temperatura</h3>
                </div>
                <div class="sensor-value" id="temperature">--</div>
                <div class="sensor-range" id="tempRange">Ideal: --</div>
                <div class="sensor-status" id="tempStatus"></div>
            </div>

            <!-- Umidade -->
            <div class="sensor-card" id="humCard">
                <div class="sensor-header">
                    <div class="sensor-icon">ğŸ’§</div>
                    <h3>Umidade</h3>
                </div>
                <div class="sensor-value" id="humidity">--</div>
                <div class="sensor-range" id="humRange">Ideal: --</div>
                <div class="sensor-status" id="humStatus"></div>
            </div>

            <!-- Luminosidade -->
            <div class="sensor-card" id="lightCard">
                <div class="sensor-header">
                    <div class="sensor-icon">ğŸ’¡</div>
                    <h3>Luminosidade</h3>
                </div>
                <div class="sensor-value" id="light">--</div>
                <div class="sensor-unit">lux</div>
                <div class="sensor-status" id="lightStatus"></div>
            </div>

            <!-- RuÃ­do -->
            <div class="sensor-card" id="soundCard">
                <div class="sensor-header">
                    <div class="sensor-icon">ğŸ”Š</div>
                    <h3>RuÃ­do</h3>
                </div>
                <div class="sensor-value" id="sound">--</div>
                <div class="sensor-unit">valor analÃ³gico</div>
                <div class="sensor-status" id="soundStatus"></div>
            </div>
        </div>

        <!-- InformaÃ§Ãµes de Materiais -->
        <div class="info-section">
            <h3>ğŸ“š Faixas Ideais por Material</h3>
            <div class="materials-info">
                <div class="material-info-card">
                    <h4>ğŸŸ¢ PLA</h4>
                    <ul>
                        <li>Temperatura: 18-28Â°C</li>
                        <li>Umidade: 40-60%</li>
                        <li>Mais tolerante a condiÃ§Ãµes variadas</li>
                    </ul>
                </div>
                <div class="material-info-card">
                    <h4>ğŸ”µ PETG</h4>
                    <ul>
                        <li>Temperatura: 20-30Â°C</li>
                        <li>Umidade: 30-50%</li>
                        <li>SensÃ­vel Ã  umidade alta</li>
                    </ul>
                </div>
                <div class="material-info-card">
                    <h4>ğŸŸ¡ ABS</h4>
                    <ul>
                        <li>Temperatura: 22-32Â°C</li>
                        <li>Umidade: 20-40%</li>
                        <li>Requer ambiente mais controlado</li>
                    </ul>
                </div>
                <div class="material-info-card">
                    <h4>ğŸŸ£ Resina</h4>
                    <ul>
                        <li>Temperatura: 20-25Â°C</li>
                        <li>Umidade: 40-60%</li>
                        <li>âš ï¸ Evitar luz direta (cura prematura)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- SeÃ§Ã£o de Logs -->
        <div class="info-section">
            <h3>ğŸ“Š HistÃ³rico e AnÃ¡lise</h3>
            <div class="log-controls">
                <button onclick="showLogs()" class="btn-primary">
                    ğŸ“ Ver Logs Salvos
                </button>
                <button onclick="downloadCurrentLog()" class="btn-secondary">
                    â¬‡ï¸ Download Log Hoje
                </button>
                <button onclick="clearData()" class="btn-danger">
                    ğŸ—‘ï¸ Limpar Cache
                </button>
            </div>
            <div id="logsList" class="logs-list" style="display:none;">
                <h4>Arquivos DisponÃ­veis:</h4>
                <ul id="logsFiles"></ul>
            </div>
        </div>

        <!-- Dicas -->
        <div class="tips-section">
            <h3>ğŸ’¡ Dicas de Uso</h3>
            <div class="tips-grid">
                <div class="tip-card">
                    <strong>ğŸ¯ Warping?</strong>
                    <p>Temperatura ambiente muito baixa pode causar contraÃ§Ã£o irregular. Verifique se estÃ¡ dentro da faixa ideal.</p>
                </div>
                <div class="tip-card">
                    <strong>ğŸ’§ Bolhas/Zits?</strong>
                    <p>Umidade alta absorve Ã¡gua no filamento. Considere desumidificador ou dry box.</p>
                </div>
                <div class="tip-card">
                    <strong>ğŸŒ¡ï¸ DelaminaÃ§Ã£o?</strong>
                    <p>VariaÃ§Ãµes bruscas de temperatura podem enfraquecer camadas. Mantenha ambiente estÃ¡vel.</p>
                </div>
                <div class="tip-card">
                    <strong>âš¡ Resina nÃ£o cura?</strong>
                    <p>Temperatura muito baixa diminui eficiÃªncia da cura. AqueÃ§a o ambiente ou a cuba.</p>
                </div>
            </div>
        </div>

        <footer>
            <p>
                <strong>Ãšltima atualizaÃ§Ã£o:</strong> <span id="lastUpdate">--</span>
            </p>
            <p class="footer-info">
                PrintSense v1.0 | ESP32-S3 | Status: <span id="connectionStatus" class="status-online">â— Online</span>
            </p>
        </footer>
    </div>

    <script src="/script.js"></script>
</body>
</html>
